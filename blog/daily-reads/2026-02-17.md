# Day 10 : Feb 17, 2026

## Two Pages Challenge

Today we read start reading compiling, as we've designed our new abstractions in form of a language and enforced our assumptions 

### What I Read Today

- what is compiler needed for?
  - it's job is to translate one level of abstraction to other

- how many level of abstractions are there? for our case or even generally? currently we've three levels of abstractions:
    - `Paren-x64 v1`, the abstract syntax representation of x64 instruction sequences
    - the string representation of `x64` instruction sequences
    - `x64` programs 

- both source and target layer, partially determine the structure of compiler 

- how we design our compiler?
  - it is a series of compiler passes along these natural lines to seperate concerns as much as possible
  - the sequence is as follows, the order is pre-determined by our abstract layers:
    - First, we translate from `Paren-x64 v1` into the string representation of instruction sequences
    - Then, we introduce the `run-time system`
    - Finally, wrap the whole thing in boilerplate

- how do we implement the run-time system?
  - requires instruction outside the subset used by `Paren-x64 v1` i.e., we must reach a lower level abstraction to implement it

- however, as the run-time system can be implemented as an `instruction sequence` so, we'll take advantage of it by first generating a x64 instruction sequence's string representation 

```
procedure

(generate-x64 p) â†’ string?

  p : paren-x64-v1?
```

this compiles a `Paren-x64 v1` program into a `x64 instruction sequence` represented as string

Examples:
```
> (generate-x64
   '(begin
      (set! rax 0)
      (set! rax (+ rax 42))))
"mov rax, 0\nadd rax, 42\n"

> (require racket/pretty)
> (pretty-display
   (generate-x64
    '(begin
       (set! rax 0)
       (set! rax (+ rax 42)))))
mov rax, 0

add rax, 42


> (pretty-display
   (generate-x64
    '(begin
       (set! rax 170679)
       (set! rdi rax)
       (set! rdi (+ rdi rdi))
       (set! rsp rdi)
       (set! rsp (* rsp rsp))
       (set! rbx 8991))))
mov rax, 170679

mov rdi, rax

add rdi, rdi

mov rsp, rdi

imul rsp, rsp

mov rbx, 8991

```


### Reflection
good understanding of what compiler is for and having multiple sequence of actions in designing a compiler. next we implement a runtime system

---
