# Day 4 : Feb 11, 2026

## Two Pages Challenge

Today we read about x64-macos

### What I Read Today

Introduction to Compiler Construction

- **x64 macos** : this is x64 using macos system calls. this is very similar to linux
- there are 4 system call tables, computed by adding system call number to specific prefix. Example; **BSD table** is most generic and linux-like with prefix #x2000000 i.e., exit sys call will be #x2000001 and write is number 4 on BSD table.
- To compile this `exit-fact-x64-linux.s`, we run `nasm -f macho64 exit-fact-x64-macos.s exit-fact-x64-macos.o`
- macho64 is the binary formatted used by 64-bit macOS.
- To link, we run `ld -static -e start -o exit-fact-x64-macos.exe exit-fact-x64-macos.o`
- We can execute the file `exit-fact-x64-macos.exe` on the command line in the usual way, and can get the result of the exit code using `echo $?` or `echo $status`, depending on your shell.

see one of the examples of assembly code to get factorial on the specific section

- **x64 windows**
    - windows doesn't allow user processes to perform system calls, instead there are `kernel functions` providing similar functionality
    - `ExitProcess` == exit system call 
    - making kernel function call : 
        -   declare external functions for linker, and ensure we link with the library that includes that function.
    - Also windows doesnt ship with linker. Can use GoLinker and compile using : `nasm -f win64 exit-fact-x64-windows.s -o exit-fact-x64-windows.o` and link using `golink /entry Start /fo exit-fact-x64-windows.exe exit-fact-x64-windows.o kernel32.dll`.


### Reflection
Gained good understanding of the target language we using x64 and its different flavors. Looking forward to design source language that'll abstract annoying part of x64 and a compiler that'll write program in x64. 


---
